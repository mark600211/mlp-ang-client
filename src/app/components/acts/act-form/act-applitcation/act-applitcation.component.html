<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>Приложение</mat-panel-title>
  </mat-expansion-panel-header>
  <div fxFlex fxLayoutGap="5px" fxLayout="column" *ngIf="controls">
    <mat-action-list>
      <button
        mat-button
        type="button"
        class="background-primary text-floral-white"
        (click)="addField()"
      >
        Добавить строку
      </button>
      <button
        mat-button
        type="button"
        class="background-primary text-floral-white"
        (click)="deleteAllFields()"
        *ngIf="controls.length > 1"
      >
        Удалить все строки
      </button>
    </mat-action-list>
    <div *ngIf="controls.length !== 0">
      <fieldset>
        <div fxFlex fxLayout="column" fxLayoutGap="10px" [formGroup]="form">
          <div
            formArrayName="applications"
            *ngFor="let app of controls; let i = index"
          >
            <div [formGroupName]="i">
              <div *ngFor="let field of fields" fxFlex>
                <app-form-renderer
                  [form]="controls[i]"
                  [field]="field"
                  [field.value]="'test'"
                ></app-form-renderer>
              </div>
              <app-clear-button
                type="button"
                (click)="deleteField(i)"
              ></app-clear-button>
            </div>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
</mat-expansion-panel>
